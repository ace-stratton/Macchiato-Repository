<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="791px" preserveAspectRatio="none" style="width:1776px;height:791px;background:#FFFFFF;" version="1.1" viewBox="0 0 1776 791" width="1776px" zoomAndPan="magnify"><defs><filter height="300%" id="fqzc294b4a3wi" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="288" x="740.75" y="30.6855">MAC protocol Server-side sequence</text><rect fill="#FFFFFF" filter="url(#fqzc294b4a3wi)" height="335.3516" style="stroke:#000000;stroke-width:2.0;" width="1701.5" x="58" y="353.3594"/><rect fill="#FFFFFF" height="151.2422" style="stroke:none;stroke-width:1.0;" width="1701.5" x="58" y="537.4688"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="22" x2="22" y1="126.25" y2="705.7109"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="155" x2="155" y1="126.25" y2="705.7109"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="769.5" x2="769.5" y1="126.25" y2="705.7109"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1270" x2="1270" y1="126.25" y2="705.7109"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1498" x2="1498" y1="126.25" y2="705.7109"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1704.5" x2="1704.5" y1="126.25" y2="705.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="5" y="123.1738">User</text><ellipse cx="22.5" cy="51.6406" fill="#FEFECE" filter="url(#fqzc294b4a3wi)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M22.5,59.6406 L22.5,86.6406 M9.5,67.6406 L35.5,67.6406 M22.5,86.6406 L9.5,101.6406 M22.5,86.6406 L35.5,101.6406 " fill="none" filter="url(#fqzc294b4a3wi)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="5" y="719.2441">User</text><ellipse cx="22.5" cy="732.3203" fill="#FEFECE" filter="url(#fqzc294b4a3wi)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M22.5,740.3203 L22.5,767.3203 M9.5,748.3203 L35.5,748.3203 M22.5,767.3203 L9.5,782.3203 M22.5,767.3203 L35.5,782.3203 " fill="none" filter="url(#fqzc294b4a3wi)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#fqzc294b4a3wi)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="171" x="68" y="89.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="75" y="111.1738">LEDProtocolServerApp.c</text><rect fill="#FEFECE" filter="url(#fqzc294b4a3wi)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="171" x="68" y="704.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="75" y="726.2441">LEDProtocolServerApp.c</text><rect fill="#FEFECE" filter="url(#fqzc294b4a3wi)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="146" x="694.5" y="89.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132" x="701.5" y="111.1738">LEDProtocolServer.c</text><rect fill="#FEFECE" filter="url(#fqzc294b4a3wi)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="146" x="694.5" y="704.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132" x="701.5" y="726.2441">LEDProtocolServer.c</text><rect fill="#FEFECE" filter="url(#fqzc294b4a3wi)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="175" x="1181" y="89.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161" x="1188" y="111.1738">ProtocolServerCommon.c</text><rect fill="#FEFECE" filter="url(#fqzc294b4a3wi)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="175" x="1181" y="704.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161" x="1188" y="726.2441">ProtocolServerCommon.c</text><rect fill="#FEFECE" filter="url(#fqzc294b4a3wi)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="93" x="1450" y="89.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="1457" y="111.1738">ESPS library</text><rect fill="#FEFECE" filter="url(#fqzc294b4a3wi)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="93" x="1450" y="704.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="1457" y="726.2441">ESPS library</text><rect fill="#FEFECE" filter="url(#fqzc294b4a3wi)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="86" x="1659.5" y="89.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="1666.5" y="111.1738">MAC Driver</text><rect fill="#FEFECE" filter="url(#fqzc294b4a3wi)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="86" x="1659.5" y="704.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="1666.5" y="726.2441">MAC Driver</text><rect fill="#EEEEEE" filter="url(#fqzc294b4a3wi)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1769.5" x="0" y="157.4258"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1769.5" y1="157.4258" y2="157.4258"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1769.5" y1="160.4258" y2="160.4258"/><rect fill="#EEEEEE" filter="url(#fqzc294b4a3wi)" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="202" x="783.75" y="146.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="184" x="789.75" y="163.7451">1. Server context registration</text><polygon fill="#A80036" points="143.5,198.9531,153.5,202.9531,143.5,206.9531,147.5,202.9531" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="22.5" x2="149.5" y1="202.9531" y2="202.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="29.5" y="198.0967">LEDServerAppInit()</text><polygon fill="#A80036" points="757.5,229.3047,767.5,233.3047,757.5,237.3047,761.5,233.3047" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="155.5" x2="763.5" y1="233.3047" y2="233.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="337" x="162.5" y="228.4482">LED_registerServerApi(LED_ServerApi_t *pCliApiHandlers)</text><rect fill="#EEEEEE" filter="url(#fqzc294b4a3wi)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1769.5" x="0" y="262.4805"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1769.5" y1="262.4805" y2="262.4805"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1769.5" y1="265.4805" y2="265.4805"/><rect fill="#EEEEEE" filter="url(#fqzc294b4a3wi)" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="192" x="788.75" y="251.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="174" x="794.75" y="268.7998">2. Handling a client request</text><polygon fill="#A80036" points="1509.5,304.0078,1499.5,308.0078,1509.5,312.0078,1505.5,308.0078" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1503.5" x2="1703.5" y1="308.0078" y2="308.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="1515.5" y="303.1514">ESSA_Stack_DataDispatch(...)</text><polygon fill="#A80036" points="780.5,334.3594,770.5,338.3594,780.5,342.3594,776.5,338.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="774.5" x2="1497.5" y1="338.3594" y2="338.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="295" x="786.5" y="333.5029">ESSA_Stack_ProtocolInfo_t::pfDataHandlerCbk(...)</text><path d="M58,353.3594 L123,353.3594 L123,361.3594 L113,371.3594 L58,371.3594 L58,353.3594 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="335.3516" style="stroke:#000000;stroke-width:2.0;" width="1701.5" x="58" y="353.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="73" y="367.8545">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="190" x="138" y="366.7783">[Requested function is supported]</text><polygon fill="#A80036" points="166.5,390.0625,156.5,394.0625,166.5,398.0625,162.5,394.0625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="160.5" x2="768.5" y1="394.0625" y2="394.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="590" x="172.5" y="389.2061">LED_setLedStateRequestHandler(ReqContext_t *ctx, LEDsetKedStateRequestData_t *pRequestData)</text><rect fill="#EEEEEE" filter="url(#fqzc294b4a3wi)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1769.5" x="0" y="423.2383"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1769.5" y1="423.2383" y2="423.2383"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1769.5" y1="426.2383" y2="426.2383"/><rect fill="#EEEEEE" filter="url(#fqzc294b4a3wi)" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="238" x="765.75" y="412.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="220" x="771.75" y="429.5576">3. Sending a response to the client</text><polygon fill="#A80036" points="757.5,464.7656,767.5,468.7656,757.5,472.7656,761.5,468.7656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="155.5" x2="763.5" y1="468.7656" y2="468.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="378" x="162.5" y="463.9092">LED_setLedStateResp(RespContext_t *ctx, ErrorStatus_t status)</text><polygon fill="#A80036" points="1486.5,495.1172,1496.5,499.1172,1486.5,503.1172,1490.5,499.1172" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="769.5" x2="1492.5" y1="499.1172" y2="499.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="776.5" y="494.2607">ESSA_Stack_SendFrameReply(...)</text><polygon fill="#A80036" points="1692.5,525.4688,1702.5,529.4688,1692.5,533.4688,1696.5,529.4688" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1498.5" x2="1698.5" y1="529.4688" y2="529.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="1505.5" y="524.6123">MAC_DrvEnqMessage(...)</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="58" x2="1759.5" y1="538.4688" y2="538.4688"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="32" x="63" y="549.8877">[else]</text><rect fill="#EEEEEE" filter="url(#fqzc294b4a3wi)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1769.5" x="0" y="574.4805"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1769.5" y1="574.4805" y2="574.4805"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1769.5" y1="577.4805" y2="577.4805"/><rect fill="#EEEEEE" filter="url(#fqzc294b4a3wi)" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="237" x="766.25" y="563.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="219" x="772.25" y="580.7998">3. Protocol error response to client</text><polygon fill="#A80036" points="1258.5,616.0078,1268.5,620.0078,1258.5,624.0078,1262.5,620.0078" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="769.5" x2="1264.5" y1="620.0078" y2="620.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="477" x="776.5" y="615.1514">ProtocolSendErrorResp(ESSATMAC_Context *pMACContext, funcIdType_t funcId)</text><polygon fill="#A80036" points="1486.5,646.3594,1496.5,650.3594,1486.5,654.3594,1490.5,650.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1270.5" x2="1492.5" y1="650.3594" y2="650.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="1277.5" y="645.5029">ESSA_Stack_SendFrameReply(...)</text><polygon fill="#A80036" points="1692.5,676.7109,1702.5,680.7109,1692.5,684.7109,1696.5,680.7109" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1498.5" x2="1698.5" y1="680.7109" y2="680.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="1505.5" y="675.8545">MAC_DrvEnqMessage(...)</text><!--MD5=[a8c74ccd2cec033d1b18badda9e2c177]
@startuml

title MAC protocol Server-side sequence

actor User
participant serverApp as "LEDProtocolServerApp.c"
participant protoServer as "LEDProtocolServer.c"
participant protoServerCommon as "ProtocolServerCommon.c"
participant satApi as "ESPS library"
participant macDrv as "MAC Driver"

== 1. Server context registration ==
User -> serverApp: LEDServerAppInit()
serverApp -> protoServer: LED_registerServerApi(LED_ServerApi_t *pCliApiHandlers)

== 2. Handling a client request ==
macDrv -> satApi: ESSA_Stack_DataDispatch(...)
satApi -> protoServer: ESSA_Stack_ProtocolInfo_t::pfDataHandlerCbk(...)
opt Requested function is supported
protoServer -> serverApp: LED_setLedStateRequestHandler(ReqContext_t *ctx, LEDsetKedStateRequestData_t *pRequestData)
== 3. Sending a response to the client ==
serverApp -> protoServer: LED_setLedStateResp(RespContext_t *ctx, ErrorStatus_t status)
protoServer -> satApi: ESSA_Stack_SendFrameReply(...)
satApi -> macDrv: MAC_DrvEnqMessage(...)
else else
== 3. Protocol error response to client ==
protoServer -> protoServerCommon: ProtocolSendErrorResp(ESSATMAC_Context *pMACContext, funcIdType_t funcId)
protoServerCommon -> satApi: ESSA_Stack_SendFrameReply(...)
satApi -> macDrv: MAC_DrvEnqMessage(...)
end opt

@enduml

PlantUML version 1.2021.12(Tue Oct 05 19:01:58 EEST 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: GB
--></g></svg>